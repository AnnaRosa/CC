<!doctype html>
<html id='doc'>
<head>

</head>
<body id='main_body'>
  <h1> Please choose a name! </h1>
  <form>
    <input type='text' id='name'/>
    <button type='submit'>Send</Button>
  </form>
  <h1 id='feedback'> </h1>
  <script src="https://cdn.socket.io/socket.io-1.2.0.js"></script>
  <script src="https://code.jquery.com/jquery-1.11.1.js"></script>
<script>
$(function () {
  var socket = io();

  /*Checks if name is valid (at least one character and no blank spaces) to send, if so sends it to the server to check if another
   user with the name exists*/
  $('form').submit(function(){
    if($('#name').val().includes(' ')){
      $('#feedback').text('Registration failed: Name must not contain blank spaces!');
    }else if($('#name').val().length==0){
      $('#feedback').text('Registration failed: Name must not be empty!');
    }
    else{
    socket.emit('registration', $('#name').val());
  }
    return false;
  });

//Refreshes the content of the html-document according to what the server sent ( -> msg ) when logging in was successful
  socket.on('registration success', function(msg){
    sessionStorage.setItem('username', $('#name').val());
    $('#main_body').html(msg);

  });
// If registration failed on the server-side (-> Name already in use), informs the user and emptys name-field
  socket.on('registration fail', function(msg){
    $('#name').val('');
    $('#feedback').text(msg);
  });
});
</script>
</body>
</html>
